{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\zmais\\\\OneDrive\\\\Desktop\\\\react-apps\\\\signal-chat\\\\screens\\\\Video\\\\AddVideo.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as ImagePicker from 'expo-image-picker';\nimport VideoPlayer from \"../../components/VideoComponents/VideoPlayer\";\nexport default function AddVideo(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasGalleryPermission = _useState2[0],\n      setHasGalleryPermission = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      video = _useState4[0],\n      setVideo = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      duration = _useState6[0],\n      setDuration = _useState6[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var galleryStatus;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n            case 2:\n              galleryStatus = _context.sent;\n              setHasGalleryPermission(galleryStatus.status === 'granted');\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var pickVideo = function pickVideo() {\n    var result;\n    return _regeneratorRuntime.async(function pickVideo$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Videos,\n              allowsEditing: true,\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setVideo(result.uri);\n              setDuration(Math.floor(result.duration / 100));\n            }\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function videoLogic() {\n    if (video != '') {\n      return React.createElement(VideoPlayer, {\n        video: video,\n        isPlay: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }\n      });\n    } else {\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: 'https://cdn4.iconfinder.com/data/icons/48-bubbles/48/23.Videos-512.png'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 19\n        }\n      }));\n    }\n  }\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, React.createElement(Button, {\n    title: \"Pick Video From Gallery\",\n    onPress: function onPress() {\n      return pickVideo();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), React.createElement(Button, {\n    title: \"Record Video\",\n    onPress: function onPress() {\n      return navigation.navigate(\"Record-Video\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), React.createElement(Button, {\n    title: \"Save\",\n    onPress: function onPress() {\n      return navigation.navigate(\"Save-Video\", {\n        video: video\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), videoLogic());\n}\nvar styles = StyleSheet.create({\n  cameraContainer: {\n    flex: 1,\n    flexDirection: 'row'\n  },\n  fixedRatio: {\n    flex: 1,\n    aspectRatio: 1\n  }\n});","map":{"version":3,"sources":["C:/Users/zmais/OneDrive/Desktop/react-apps/signal-chat/screens/Video/AddVideo.js"],"names":["React","useState","useEffect","ImagePicker","VideoPlayer","AddVideo","navigation","hasGalleryPermission","setHasGalleryPermission","video","setVideo","duration","setDuration","requestCameraRollPermissionsAsync","galleryStatus","status","pickVideo","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Videos","allowsEditing","quality","result","console","log","cancelled","uri","Math","floor","videoLogic","flex","navigate","styles","StyleSheet","create","cameraContainer","flexDirection","fixedRatio","aspectRatio"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;AAGA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;AACA,OAAOC,WAAP;AAGA,eAAe,SAASC,QAAT,OAAkC;AAAA,MAAdC,UAAc,QAAdA,UAAc;;AAC/C,kBAAwDL,QAAQ,CAAC,IAAD,CAAhE;AAAA;AAAA,MAAOM,oBAAP;AAAA,MAA6BC,uBAA7B;;AAIA,mBAA0BP,QAAQ,CAAC,IAAD,CAAlC;AAAA;AAAA,MAAOQ,KAAP;AAAA,MAAcC,QAAd;;AACA,mBAAgCT,QAAQ,CAAC,CAAD,CAAxC;AAAA;AAAA,MAAOU,QAAP;AAAA,MAAiBC,WAAjB;;AAGAV,EAAAA,SAAS,CAAC,YAAM;AACd,KAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAC6BC,WAAW,CAACU,iCAAZ,EAD7B;;AAAA;AACOC,cAAAA,aADP;AAECN,cAAAA,uBAAuB,CAACM,aAAa,CAACC,MAAd,KAAyB,SAA1B,CAAvB;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAKD,GANQ,EAMN,EANM,CAAT;;AASA,MAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACGb,WAAW,CAACc,uBAAZ,CAAoC;AACrDC,cAAAA,UAAU,EAAEf,WAAW,CAACgB,gBAAZ,CAA6BC,MADY;AAErDC,cAAAA,aAAa,EAAE,IAFsC;AAGrDC,cAAAA,OAAO,EAAE;AAH4C,aAApC,CADH;;AAAA;AACZC,YAAAA,MADY;AAMhBC,YAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,gBAAI,CAACA,MAAM,CAACG,SAAZ,EAAuB;AACrBhB,cAAAA,QAAQ,CAACa,MAAM,CAACI,GAAR,CAAR;AACAf,cAAAA,WAAW,CAACgB,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACZ,QAAP,GAAkB,GAA7B,CAAD,CAAX;AACD;;AAVe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAcA,WAASmB,UAAT,GAAqB;AAInB,QAAIrB,KAAK,IAAI,EAAb,EAAgB;AACV,aACI,oBAAC,WAAD;AACE,QAAA,KAAK,EAAEA,KADT;AAEE,QAAA,MAAM,EAAE,IAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAMH,KAPH,MAQO;AACD,aACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AACE,QAAA,MAAM,EAAE;AAACkB,UAAAA,GAAG,EAAE;AAAN,SADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ;AASH;AACJ;;AAED,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEI,MAAAA,IAAI,EAAE;AAAR,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,yBAAd;AAAwC,IAAA,OAAO,EAAE;AAAA,aAAMf,SAAS,EAAf;AAAA,KAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,cAAd;AAA6B,IAAA,OAAO,EAAE;AAAA,aAAMV,UAAU,CAAC0B,QAAX,CAAoB,cAApB,CAAN;AAAA,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,EAKE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,OAAO,EAAE;AAAA,aAAM1B,UAAU,CAAC0B,QAAX,CAAoB,YAApB,EAAkC;AAACvB,QAAAA,KAAK,EAAEA;AAAR,OAAlC,CAAN;AAAA,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAMGqB,UAAU,EANb,CADF;AAUD;AAED,IAAMG,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,eAAe,EAAE;AACfL,IAAAA,IAAI,EAAE,CADS;AAEfM,IAAAA,aAAa,EAAE;AAFA,GADc;AAK/BC,EAAAA,UAAU,EAAE;AACVP,IAAAA,IAAI,EAAE,CADI;AAEVQ,IAAAA,WAAW,EAAE;AAFH;AALmB,CAAlB,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View, Button, Image } from 'react-native';\r\n//import { Camera } from 'expo-camera';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport VideoPlayer from '../../components/VideoComponents/VideoPlayer';\r\n\r\n\r\nexport default function AddVideo({ navigation }) {\r\n  const [hasGalleryPermission, setHasGalleryPermission] = useState(null);\r\n\r\n\r\n  \r\n  const [video, setVideo] = useState(null);\r\n  const [duration ,setDuration] = useState(0)\r\n \r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const galleryStatus = await ImagePicker.requestCameraRollPermissionsAsync();\r\n      setHasGalleryPermission(galleryStatus.status === 'granted');\r\n    })();\r\n\r\n  }, []);\r\n\r\n\r\n  const pickVideo = async () => {\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.Videos,\r\n      allowsEditing: true,\r\n      quality: 1,\r\n    });\r\n    console.log(result);\r\n    if (!result.cancelled) {\r\n      setVideo(result.uri);\r\n      setDuration(Math.floor(result.duration / 100));\r\n    }\r\n  };\r\n\r\n\r\n  function videoLogic(){\r\n\r\n    \r\n\r\n    if (video != ''){\r\n          return (\r\n              <VideoPlayer\r\n                video={video}\r\n                isPlay={true}\r\n              ></VideoPlayer>\r\n          )\r\n      }\r\n      else {\r\n          return (\r\n              <View>\r\n                  <Image\r\n                    source={{uri: 'https://cdn4.iconfinder.com/data/icons/48-bubbles/48/23.Videos-512.png'}}\r\n                  >\r\n\r\n                  </Image>\r\n              </View>\r\n          )\r\n      }\r\n  }\r\n  \r\n  return (\r\n    <View style={{ flex: 1 }}>\r\n\r\n      \r\n      <Button title=\"Pick Video From Gallery\" onPress={() => pickVideo()} />\r\n      <Button title=\"Record Video\" onPress={() => navigation.navigate(\"Record-Video\")} />\r\n      <Button title=\"Save\" onPress={() => navigation.navigate(\"Save-Video\", {video: video})} />\r\n      {videoLogic()}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  cameraContainer: {\r\n    flex: 1,\r\n    flexDirection: 'row'\r\n  },\r\n  fixedRatio: {\r\n    flex: 1,\r\n    aspectRatio: 1\r\n  }\r\n\r\n})\r\n"]},"metadata":{},"sourceType":"module"}