{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject,\n    _jsxFileName = \"C:\\\\Users\\\\zmais\\\\OneDrive\\\\Desktop\\\\react-apps\\\\signal-chat\\\\screens\\\\Video\\\\VideosScreen.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useRef } from 'react';\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport styled from 'styled-components/native';\nimport Header from \"../../components/VideoComponents/Header\";\nimport Hero from \"../../components/VideoComponents/Hero\";\nimport Tabs from \"../../components/VideoComponents/Tabs\";\nimport { auth, db } from \"../../services/firebase\";\nimport VideoComments from \"../../components/VideoComponents/VideoComments\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport VideoPlayer from \"../../components/VideoComponents/VideoPlayer\";\nvar Container = styled.View(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n\\tflex: 1;\\n\\tbackground: transparent;\\n\"])));\nexport default function VideoScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      allVideos = _useState2[0],\n      setAllVideos = _useState2[1];\n\n  var postsFor = auth.currentUser.uid;\n  var sheetRef = useRef();\n  useEffect(function () {\n    function main() {\n      var executeLoop, mainloop;\n      return _regeneratorRuntime.async(function main$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              mainloop = function _mainloop(item, index, arr) {\n                return _regeneratorRuntime.async(function mainloop$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return _regeneratorRuntime.awrap(db.collection('videos').doc(item.data.userId).collection('userVideos').orderBy('creation', 'desc').onSnapshot(function (snapshot) {\n                          var thisVideos = snapshot.docs.map(function (doc) {\n                            return {\n                              id: doc.id,\n                              user: item.data.userId,\n                              data: doc.data()\n                            };\n                          });\n                          setAllVideos(function (allVideos) {\n                            return _toConsumableArray(allVideos).concat(thisVideos);\n                          });\n                        }));\n\n                      case 2:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              };\n\n              executeLoop = function _executeLoop(array) {\n                return _regeneratorRuntime.async(function executeLoop$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        array.forEach(mainloop);\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              };\n\n              _context3.next = 4;\n              return _regeneratorRuntime.awrap(db.collection('following').doc(postsFor).collection('userFollowing').orderBy('timestamp', 'desc').onSnapshot(function (snapshot) {\n                return executeLoop(snapshot.docs.map(function (doc) {\n                  return {\n                    id: doc.id,\n                    data: doc.data()\n                  };\n                }));\n              }));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    main();\n  }, []);\n  console.warn(allVideos.length);\n\n  function renderBottomSheetContent() {\n    return React.createElement(VideoComments, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    });\n  }\n\n  function openBottomSheet() {\n    sheetRef.current.snapTo(0);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(StatusBar, {\n    translucent: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }\n  }), React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }\n  }, React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }), React.createElement(Hero, {\n    videos: allVideos,\n    navigation: navigation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }), React.createElement(Tabs, {\n    navigation: navigation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/zmais/OneDrive/Desktop/react-apps/signal-chat/screens/Video/VideosScreen.js"],"names":["React","useEffect","useState","useRef","styled","Header","Hero","Tabs","auth","db","VideoComments","VideoPlayer","Container","View","VideoScreen","navigation","allVideos","setAllVideos","postsFor","currentUser","uid","sheetRef","main","executeLoop","mainloop","item","index","arr","collection","doc","data","userId","orderBy","onSnapshot","snapshot","thisVideos","docs","map","id","user","concat","array","forEach","console","warn","length","renderBottomSheetContent","openBottomSheet","current","snapTo"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\r\n\r\nimport { StatusBar } from 'react-native'\r\n\r\nimport styled from 'styled-components/native'\r\n\r\nimport Header from '../../components/VideoComponents/Header'\r\nimport Hero from '../../components/VideoComponents/Hero'\r\nimport Tabs from '../../components/VideoComponents/Tabs'\r\nimport { auth, db } from '../../services/firebase'\r\n\r\n//import BottomSheet from 'reanimated-bottom-sheet';\r\nimport VideoComments from '../../components/VideoComponents/VideoComments'\r\nimport { Button } from 'react-native'\r\nimport VideoPlayer from '../../components/VideoComponents/VideoPlayer'\r\n\r\n\r\nconst Container = styled.View`\r\n\tflex: 1;\r\n\tbackground: transparent;\r\n`\r\n\r\nexport default function VideoScreen({ navigation }){\r\n\r\n\tconst [allVideos, setAllVideos] = useState([]);\r\n\r\n    const postsFor = auth.currentUser.uid;\r\n\r\n    const sheetRef = useRef();\r\n\r\n    useEffect(() => {    \r\n\r\n        async function main(){\r\n            await db.collection('following')\r\n                    .doc(postsFor).collection('userFollowing')\r\n                    .orderBy('timestamp', 'desc')\r\n                    .onSnapshot((snapshot) => executeLoop(snapshot.docs.map(doc => ({\r\n                    id: doc.id,\r\n                    data: doc.data()\r\n\r\n            }))))\r\n                        \r\n            async function executeLoop(array){\r\n                array.forEach(mainloop)\r\n                \r\n            }\r\n\r\n            async function mainloop(item, index, arr){\r\n                await db.collection('videos')\r\n                .doc(item.data.userId).collection('userVideos')\r\n                .orderBy('creation', 'desc')\r\n                .onSnapshot((snapshot) =>  {\r\n                    var thisVideos = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                user: item.data.userId,\r\n                data: doc.data()\r\n                })\r\n                )\r\n                setAllVideos(allVideos => [...allVideos].concat(thisVideos))\r\n                })\r\n\r\n            }\r\n            //userFollowing.forEach(mainloop)\r\n        }\r\n\r\n        main()\r\n        \r\n    }, [])\r\n\r\n    console.warn(allVideos.length)\r\n\r\n    function renderBottomSheetContent(){\r\n        return (\r\n            <VideoComments></VideoComments>\r\n        )\r\n    }\r\n\r\n\r\n    function openBottomSheet(){\r\n        sheetRef.current.snapTo(0);\r\n    }\r\n\r\n    //const Container = 2;\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<StatusBar\r\n\t\t\t\ttranslucent\r\n\t\t\t\t//backgroundColor='transparent'\r\n\t\t\t\t//barStyle='light-content'\r\n\t\t\t/>\r\n\t\t\t<Container>\r\n\t\t\t\t<Header />\r\n             \r\n\t\t\t\t<Hero videos={allVideos} navigation={navigation}/>\r\n\r\n                \r\n                \r\n\t\t\t\t<Tabs navigation={navigation} />\r\n\t\t\t</Container>\r\n\r\n            \r\n\t\t</>\r\n\t)\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}