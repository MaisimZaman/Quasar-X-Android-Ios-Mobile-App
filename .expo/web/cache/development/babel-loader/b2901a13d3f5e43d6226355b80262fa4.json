{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\zmais\\\\OneDrive\\\\Desktop\\\\react-apps\\\\signal-chat\\\\components\\\\VideoComponents\\\\Sidebar.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { auth, db } from \"../../services/firebase\";\nimport styled from 'styled-components/native';\nvar Container = styled.View(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n\\twidth: 60px;\\n\\theight: 100%;\\n\\tpadding-bottom: 59px;\\n\\tjustify-content: flex-end;\\n\"])));\nvar Menu = styled.View(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n\\tmargin: 9px 0;\\n\\talign-items: center;\\n\"])));\nvar User = styled.View(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"\\n\\twidth: 48px;\\n\\theight: 48px;\\n\\tmargin-bottom: 13px;\\n\"])));\nvar Avatar = styled.Image(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\"\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tborder-radius: 48px;\\n\\tborder-width: 2px;\\n\\tborder-color: #ffffff;\\n\"])));\nvar Icon = styled.Image(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose([\"\\n\\theight: 40px;\\n\"])));\nvar Count = styled.Text(_templateObject6 || (_templateObject6 = _taggedTemplateLiteralLoose([\"\\n\\tcolor: #fff;\\n\\tfont-size: 12px;\\n\\tletter-spacing: -0.1px;\\n\"])));\nvar SoundBg = styled.View(_templateObject7 || (_templateObject7 = _taggedTemplateLiteralLoose([\"\\n\\tbackground: #1f191f;\\n\\twidth: 50px;\\n\\theight: 50px;\\n\\tborder-radius: 50px;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tmargin-top: 20px;\\n\"])));\nvar Sound = styled.Image(_templateObject8 || (_templateObject8 = _taggedTemplateLiteralLoose([\"\\n\\twidth: 25px;\\n\\theight: 25px;\\n\\tborder-radius: 25px;\\n\"])));\n\nvar Sidebar = function Sidebar(_ref) {\n  var avatar = _ref.avatar,\n      count = _ref.count,\n      navigation = _ref.navigation;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      numOfComments = _useState2[0],\n      setNumOfComments = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLiked = _useState4[0],\n      setIsLiked = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      docId = _useState6[0],\n      setDocId = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      likesCount = _useState8[0],\n      setLikesCount = _useState8[1];\n\n  useEffect(function () {\n    var unsubscribe = function unsubscribe() {\n      try {\n        db.collection(\"videoComments\").doc(avatar.id).collection(\"thisVideoComments\").then(function (snap) {\n          setNumOfComments(snap.size);\n        });\n      } catch (error) {\n        setNumOfComments(0);\n      }\n\n      db.collection(\"videoLikes\").doc(avatar.id).collection(\"usersLikes\").get().then(function (snapshot) {\n        return setLikesCount(snapshot.size);\n      });\n      db.collection(\"videoLikes\").doc(avatar.id).collection(\"userLikes\").where(\"userLiked\", \"==\", auth.currentUser.uid).get().then(function (snapshot) {\n        if (snapshot.size > 0) {\n          setIsLiked(true);\n          snapshot.forEach(function (doc) {\n            setDocId(doc.id);\n          });\n        } else {\n          setIsLiked(false);\n        }\n      });\n    };\n\n    return unsubscribe;\n  }, []);\n\n  function renderLikeButton() {\n    function likeVideo() {\n      db.collection(\"videoLikes\").doc(avatar.id).collection(\"userLikes\").add({\n        userLiked: auth.currentUser.uid\n      });\n      setIsLiked(true);\n    }\n\n    function unlikeVideo() {\n      console.warn(docId);\n      db.collection(\"videoLikes\").doc(avatar.id).collection(\"userLikes\").doc(docId.toString()).delete();\n      setIsLiked(false);\n    }\n\n    if (isLiked) {\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return unlikeVideo();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 5\n        }\n      }, React.createElement(Menu, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 6\n        }\n      }, React.createElement(Icon, {\n        resizeMode: \"contain\",\n        source: require(\"../../services/assets/icons/heart.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 7\n        }\n      }), React.createElement(Count, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 7\n        }\n      }, likesCount)));\n    } else {\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return likeVideo();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 5\n        }\n      }, React.createElement(Menu, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 6\n        }\n      }, React.createElement(Icon, {\n        resizeMode: \"contain\",\n        source: require(\"../../services/assets/icons/like.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 6\n        }\n      }), React.createElement(Count, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 6\n        }\n      }, likesCount)));\n    }\n  }\n\n  return React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 3\n    }\n  }, React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 4\n    }\n  }, React.createElement(User, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, React.createElement(Avatar, {\n    resizeMode: \"cover\",\n    source: {\n      uri: avatar.data.profilePic\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 6\n    }\n  }))), renderLikeButton(), React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 4\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Video-Comments\", {\n        posterProfilePic: avatar.data.profilePic,\n        posterUserName: avatar.data.userName,\n        posterCaption: avatar.data.caption,\n        postId: avatar.id\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 5\n    }\n  }, React.createElement(Icon, {\n    resizeMode: \"contain\",\n    source: require(\"../../services/assets/icons/comment.png\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 6\n    }\n  }), React.createElement(Count, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 6\n    }\n  }, numOfComments))), React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 4\n    }\n  }, React.createElement(Icon, {\n    resizeMode: \"contain\",\n    source: require(\"../../services/assets/icons/share.png\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }\n  }), React.createElement(Count, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 5\n    }\n  }, \"0\")), React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 4\n    }\n  }, React.createElement(SoundBg, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }\n  }, React.createElement(Sound, {\n    resizeMode: \"cover\",\n    source: {\n      uri: avatar.data.profilePic\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 6\n    }\n  }))));\n};\n\nexport default Sidebar;","map":{"version":3,"sources":["C:/Users/zmais/OneDrive/Desktop/react-apps/signal-chat/components/VideoComponents/Sidebar.js"],"names":["React","useState","useEffect","auth","db","styled","Container","View","Menu","User","Avatar","Image","Icon","Count","Text","SoundBg","Sound","Sidebar","avatar","count","navigation","numOfComments","setNumOfComments","isLiked","setIsLiked","docId","setDocId","likesCount","setLikesCount","unsubscribe","collection","doc","id","then","snap","size","error","get","snapshot","where","currentUser","uid","forEach","renderLikeButton","likeVideo","add","userLiked","unlikeVideo","console","warn","toString","delete","require","uri","data","profilePic","navigate","posterProfilePic","posterUserName","userName","posterCaption","caption","postId"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { TouchableOpacity} from 'react-native'\nimport { auth, db } from '../../services/firebase'\nimport styled from 'styled-components/native'\n\n\n\nconst Container = styled.View`\n\twidth: 60px;\n\theight: 100%;\n\tpadding-bottom: 59px;\n\tjustify-content: flex-end;\n`\nconst Menu = styled.View`\n\tmargin: 9px 0;\n\talign-items: center;\n`\nconst User = styled.View`\n\twidth: 48px;\n\theight: 48px;\n\tmargin-bottom: 13px;\n`\nconst Avatar = styled.Image`\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 48px;\n\tborder-width: 2px;\n\tborder-color: #ffffff;\n`\nconst Icon = styled.Image`\n\theight: 40px;\n`\nconst Count = styled.Text`\n\tcolor: #fff;\n\tfont-size: 12px;\n\tletter-spacing: -0.1px;\n`\nconst SoundBg = styled.View`\n\tbackground: #1f191f;\n\twidth: 50px;\n\theight: 50px;\n\tborder-radius: 50px;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-top: 20px;\n`\nconst Sound = styled.Image`\n\twidth: 25px;\n\theight: 25px;\n\tborder-radius: 25px;\n`\n\nconst Sidebar = ({ avatar, count, navigation }) => {\n\n\tconst [numOfComments, setNumOfComments] = useState(0);\n\tconst [isLiked, setIsLiked] = useState(null)\n\tconst [docId, setDocId] = useState('')\n\tconst [likesCount, setLikesCount] = useState(0)\n\n\n\n\tuseEffect(() => {\n\t\t\n\t\tconst unsubscribe = () => { \n\n\t\t\ttry {\n\t\t\t\tdb.collection(\"videoComments\")\n\t\t\t\t\t.doc(avatar.id)\n\t\t\t\t\t.collection(\"thisVideoComments\")\n\t\t\t\t\t.then(snap => {setNumOfComments(snap.size)})\n\n\t\t\t\t}\n\t\t\t\n\t\t\tcatch(error) {\n\t\t\t\tsetNumOfComments(0)\n\t\t\t\t\n\t\t\t}\n\n\t\t\tdb.collection(\"videoLikes\")\n\t\t\t\t.doc(avatar.id)\n\t\t\t\t.collection(\"usersLikes\")\n\t\t\t\t.get()\n\t\t\t\t.then(snapshot => setLikesCount(snapshot.size))\n\n\t\t\tdb.collection(\"videoLikes\")\n\t\t\t\t.doc(avatar.id)\n\t\t\t\t.collection(\"userLikes\")\n\t\t\t\t.where(\"userLiked\", \"==\", auth.currentUser.uid)\n\t\t\t\t.get()\n\t\t\t\t.then(snapshot => {\n\t\t\t\t\tif (snapshot.size > 0){\n\t\t\t\t\t\tsetIsLiked(true)\n\t\t\t\t\t\tsnapshot.forEach((doc) => {\n\t\t\t\t\t\t\tsetDocId(doc.id)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsetIsLiked(false)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\n\t\t\t\n\t\n\n\t\t}\n\t\t\t\n\n\t\t\n\t\t\n\t\treturn unsubscribe\n\t}, [])\n\n\n\tfunction renderLikeButton(){\n\n\t\tfunction likeVideo(){\n\t\t\tdb.collection(\"videoLikes\")\n                .doc(avatar.id)\n\t\t\t\t.collection(\"userLikes\")\n                .add({\n                        userLiked: auth.currentUser.uid \n                    })\n\t\t\tsetIsLiked(true);\n\t\t\t\n\t\t}\n\n\t\tfunction unlikeVideo(){\n\n\t\t\t\n\t\t\tconsole.warn(docId)\n\t\t\tdb.collection(\"videoLikes\")\n\t\t\t\t.doc(avatar.id)\n\t\t\t\t.collection(\"userLikes\")\n\t\t\t\t.doc(docId.toString())\n\t\t\t\t.delete()\n\n\t\t\t//console.warn(docId)\n\t\t\tsetIsLiked(false)\n\t\t\t\n\n\t\t\t\n\n\t\t}\n\n\n\t\tif (isLiked){\n\t\t\treturn (\n\t\t\t\t<TouchableOpacity onPress={() => unlikeVideo()}>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t\t<Icon resizeMode='contain' source={require('../../services/assets/icons/heart.png')} />\n\t\t\t\t\t\t<Count>{likesCount}</Count>\n\t\t\t\t\t</Menu>\n\t\t\t\t</TouchableOpacity>\n\t\t\t)\n\n\t\t}\n\t\telse {\n\t\t\treturn (\n\t\t\t\t<TouchableOpacity onPress={() => likeVideo()}>\n\t\t\t\t\t<Menu>\n\t\t\t\t\t<Icon resizeMode='contain' source={require('../../services/assets/icons/like.png')} />\n\t\t\t\t\t<Count>{likesCount}</Count>\n\t\t\t\t\t</Menu>\n\t\t\t\t</TouchableOpacity>\n\t\t\t)\n\t\t}\n\t\t\n\t}\n\t\n\t\n\n\treturn (\n\t\t<Container>\n\t\t\t<Menu>\n\t\t\t\t<User>\n\t\t\t\t\t<Avatar resizeMode='cover' source={{uri: avatar.data.profilePic}} />\n\t\t\t\t</User>\n\t\t\t</Menu>\n\t\t\t\n\t\t\t{renderLikeButton()}\n\n\t\t\t<Menu>\n\t\t\t\t<TouchableOpacity onPress={() => navigation.navigate(\"Video-Comments\", {\n\t\t\t\t\tposterProfilePic: avatar.data.profilePic,\n\t\t\t\t\tposterUserName: avatar.data.userName,\n\t\t\t\t\tposterCaption: avatar.data.caption,\n\t\t\t\t\tpostId: avatar.id,\n\t\t\t\t})}>\n\t\t\t\t\t<Icon\n\t\t\t\t\tresizeMode='contain'\n\t\t\t\t\tsource={require('../../services/assets/icons/comment.png')}\n\t\t\t\t\t/>\n\t\t\t\t\t<Count>{numOfComments}</Count>\n\t\t\t\t</TouchableOpacity>\n\t\t\t</Menu>\n\n\t\t\t<Menu>\n\t\t\t\t<Icon resizeMode='contain' source={require('../../services/assets/icons/share.png')} />\n\t\t\t\t<Count>{\"0\"}</Count>\n\t\t\t</Menu>\n\n\t\t\t<Menu>\n\t\t\t\t<SoundBg>\n\t\t\t\t\t<Sound resizeMode='cover' source={{uri: avatar.data.profilePic}} />\n\t\t\t\t</SoundBg>\n\t\t\t</Menu>\n\t\t</Container>\n\n\t\t\n\t)\n}\n\nexport default Sidebar\n"]},"metadata":{},"sourceType":"module"}